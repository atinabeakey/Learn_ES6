<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="
    
    width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
</head>
<body>  
    <script>
    //Generator
        
        //基本概念

            // //es6提供的一种异步编程解决方案
            //    /* //特征：
            //         function 与函数名之间有一个*
            //         返回遍历器对象
            //         用next 改变内部指针
            //         多个yield 一个return
            //       */
            //     function* helloGenerator() {
            //         yield 'hello';
            //         yield 'world';
            //         return 'ending';

            //     }
            //     const hw = helloGenerator();
            //     console.log(hw.next())  // { value: "hello", done: false }
            //     console.log(hw.next())  // { value: "world", done: false }
            //     console.log(hw.next())  //{ value: "ending", done: true }
            //     console.log(hw.next())  //{value: undefined, done: true}
           /*  // 惰性函数
                // 必须对遍历器对象执行next方法才能改变指针并执行改变过程中的语句
                function* f() {
                     yield console.log(1 + 2); //3
                }
                const g  = f();
                setTimeout(() => {
                    console.log(g.next()); //  {value: undefined, done: false}
                    console.log(g.next()); // {value: undefined, done: true}
                }, 2000); */

            //yield语句
                //只能存在于当前代码块为Generator函数中，不能存在于普通函数中
                    const arr = [1, [[2, 3], 4], [5]];
                    //错误
                    // const flat = function* (a) {
                    //     a.forEach((item) => {
                    //             console.log(item)
                    //         if(typeof item === "number"){
                    //             yield* flat(item);
                    //         }else{
                    //             yield item;  //语法错误
                    //         }
                    //     });
                    // }    
                      
                    //正确 
                    const flat = function* (a) {
                        const len = a.length;
                        for(let i = 0;i<len;i++){
                            const item = a[i];
                            if(typeof item !== 'number'){
                                yield* flat(item);
                            }else{
                                yield item;
                            }
                        }

                    }
                    for (let f of flat(arr)) {
                        console.log(f); // 1 2 3 4 5
                    } 

                    //任何一个对象的Symbol.iterator方法等于该对象的遍历器对象生成函数，调用该函数返回该对象的一个遍历器
                    //遍历器对象本身也有Symbol.iterator方法，执行后返回自身
                    function* gen(params) {
                        
                    }
                    const g = gen();
                    console.log(g[Symbol.iterator]() === g)  //true
    </script>  
</body>
</html>                                 






.